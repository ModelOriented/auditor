<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Model evaluation audit • auditor</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../dalexverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../dalexverse-2.css" rel="stylesheet">
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Model evaluation audit">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- google analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14"></script><script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
      <a class="navbar-mi2logo" href="http://DrWhy.AI/">
    <img src="https://github.com/ModelOriented/DrWhyTemplate/blob/master/inst/pkgdown/assets/drwhy_znak_violet_small.jpg?raw=true" alt="MI2" height="46" title="MI2"></a>
        <a class="navbar-brand" href="../index.html">auditor</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/">MI^2 DataLab</a> </span>
          <span class="version version-default">1.0.0</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/model_evaluation_audit.html">Model evaluation audit</a>
    </li>
    <li>
      <a href="../articles/model_fit_audit.html">Model fit audit</a>
    </li>
    <li>
      <a href="../articles/model_performance_audit.html">Model performance audit</a>
    </li>
    <li>
      <a href="../articles/model_residuals_audit.html">Model residuals audit</a>
    </li>
    <li>
      <a href="../articles/observation_influence_audit.html">Observation influence audit</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/auditor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Model evaluation audit</h1>
                        <h4 class="author">Alicja Gosiewska</h4>
            
            <h4 class="date">2019-09-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ModelOriented/auditor/blob/master/vignettes/model_evaluation_audit.Rmd"><code>vignettes/model_evaluation_audit.Rmd</code></a></small>
      <div class="hidden name"><code>model_evaluation_audit.Rmd</code></div>

    </div>

    
    
<p>In this vignette we present plots for evaluation of classification models.</p>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>We work on <code>titanic</code> dataset form the <code>DALEX</code> package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">titanic &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/na.fail">na.omit</a></span>(DALEX<span class="op">::</span>titanic)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">titanic<span class="op">$</span>survived =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(titanic<span class="op">$</span>survived)<span class="op">-</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(titanic)</a></code></pre></div>
<pre><code>##   gender age class    embarked       country  fare sibsp parch survived
## 1   male  42   3rd Southampton United States  7.11     0     0        0
## 2   male  13   3rd Southampton United States 20.05     0     2        0
## 3   male  16   3rd Southampton United States 20.05     1     1        0
## 4 female  39   3rd Southampton       England 20.05     1     1        1
## 5 female  16   3rd Southampton        Norway  7.13     0     0        1
## 6   male  25   3rd Southampton United States  7.13     0     0        1</code></pre>
</div>
<div id="models" class="section level2">
<h2 class="hasAnchor">
<a href="#models" class="anchor"></a>Models</h2>
<p>We fit 2 models: glm and svm.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">model_glm &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/glm">glm</a></span>(survived <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> titanic, <span class="dt">family =</span> binomial)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(e1071)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">model_svm &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/e1071/topics/svm">svm</a></span>(survived <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> titanic)</a></code></pre></div>
</div>
<div id="preparation-for-evaluation-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#preparation-for-evaluation-analysis" class="anchor"></a>Preparation for evaluation analysis</h2>
<p>The first step is creating <code>explainer</code> object with the <code>DALEX</code> package. It’s an object that can be used to audit a model. It wraps up a model with meta-data.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">exp_glm &lt;-<span class="st"> </span>DALEX<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/DALEX/topics/explain">explain</a></span>(model_glm, <span class="dt">data =</span> titanic, <span class="dt">y =</span> titanic<span class="op">$</span>survived)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">exp_svm &lt;-<span class="st"> </span>DALEX<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/DALEX/topics/explain">explain</a></span>(model_svm, <span class="dt">data =</span> titanic, <span class="dt">y =</span> titanic<span class="op">$</span>survived, <span class="dt">label =</span> <span class="st">"svm"</span>)</a></code></pre></div>
<p>Second step is creating <code>auditor_model_evaluation</code> object that can be further used for validating a model.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(auditor)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">eva_glm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_evaluation.html">model_evaluation</a></span>(exp_glm)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">eva_svm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_evaluation.html">model_evaluation</a></span>(exp_svm)</a></code></pre></div>
</div>
<div id="plots" class="section level2">
<h2 class="hasAnchor">
<a href="#plots" class="anchor"></a>Plots</h2>
<div id="receiver-operating-characteristic-roc" class="section level3">
<h3 class="hasAnchor">
<a href="#receiver-operating-characteristic-roc" class="anchor"></a>Receiver operating characteristic (ROC)</h3>
<p>Receiver operating characteristic (ROC) curve is a tool for visualising a classifier’s performance. It answers the question of how well the model discriminates between the two classes. The boundary between classes is determined by a threshold value. ROC illustrates the performance of a classification model at various threshold settings.</p>
<p>The diagonal line <code>y = x</code> corresponds to a classifier that randomly guess the positive class half the time. Any model that appears in the lower right part of plot performs worse than random guessing. The closer the curve is to the the left border and top border of plot, the more accurate the classifier is.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(eva_glm, eva_svm, <span class="dt">type =</span> <span class="st">"roc"</span>)</a></code></pre></div>
<p><img src="model_evaluation_audit_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># or</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co"># plot_roc(eva_glm, eva_svm)</span></a></code></pre></div>
</div>
<div id="lift-chart" class="section level3">
<h3 class="hasAnchor">
<a href="#lift-chart" class="anchor"></a>LIFT chart</h3>
<p>The LIFT chart is a rate of positive prediction (<em>RPP</em>) plotted against true positive (<em>TP</em>) on a threshold <em>t</em>.</p>
<p>The chart illustrates varying performance of the model for different thresholds. A random and ideal models are represented by dashed curves (lower and upper respectively). The closer the LIFT curve gets to the upper dashed curve (ideal model), the better a model is.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(eva_glm, eva_svm, <span class="dt">type =</span> <span class="st">"lift"</span>)</a></code></pre></div>
<p><img src="model_evaluation_audit_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># or</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co"># plot_lift(eva_glm, eva_svm)</span></a></code></pre></div>
</div>
</div>
<div id="other-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#other-methods" class="anchor"></a>Other methods</h2>
<p>Other methods and plots are described in vignettes:</p>
<ul>
<li><a href="https://modeloriented.github.io/auditor/articles/model_residuals_audit.html">Model residuals audit</a></li>
<li><a href="https://modeloriented.github.io/auditor/articles/model_fit_audit.html">Model fit audit</a></li>
<li><a href="https://modeloriented.github.io/auditor/articles/model_performance_audit.html">Model performance audit</a></li>
<li><a href="https://modeloriented.github.io/auditor/articles/observation_influence_audit.html">Observation influence audit</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#data">Data</a></li>
      <li><a href="#models">Models</a></li>
      <li><a href="#preparation-for-evaluation-analysis">Preparation for evaluation analysis</a></li>
      <li><a href="#plots">Plots</a></li>
      <li><a href="#other-methods">Other methods</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="author">
  <p>
    Developed by Alicja Gosiewska, Przemyslaw Biecek, Hubert Baniecki, Tomasz Mikołajczyk.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>
      </footer>
</div>

  

  </body>
</html>
